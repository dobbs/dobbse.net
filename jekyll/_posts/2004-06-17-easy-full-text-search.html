--- 
layout: post
title: OS X's (disappointing) full text search at your fingertips
date: 2004-06-17T12:45:02
link: http://dobbse.net/thinair/2004/06/easy-full-text-search.html
---
<p><strong>Hey Tim, use the Find command.</strong></p>

<p>While pointing to <a href="http://www.joelonsoftware.com/articles/APIWar.html">Joel&#39;s excellent discussion about the API war</a>, <a href="http://www.tbray.org/ongoing/When/200x/2004/06/17/Joel:">Tim asked why we don&#39;t have full text search close at hand</a></p>

<blockquote><p>We&#8217;ve had good full-text search technology since the Seventies, and in the last ten years more or less everybody has become a regular user of full-text search. Why isn&#8217;t there good built-in full-text desktop search available right now today on both <span class="caps">OS X</span> and Windows, out of the box?</p></blockquote>

<p>Tim, I know you&#39;re using <span class="caps">OS X</span>:<br />
1.  Type Command-Tab until you get to the finder<br />
2.  Type Command-F.</p>

<p>Search for items whose <em>Content</em> includes your search string.</p>

<p><ins>Update:</ins> then there&#39;s the part about <em>indexed full-text search</em>.  In the context of Joel&#39;s piece I can&#39;t help but restate Tim&#39;s point: <a href="http://google.com">one particular web application</a> is insanely more useable for search than <a href="http://www.apple.com/macosx/">the most usable OS on the planet</a>.  Announcer: &quot;Those richUIs are looking a little exhausted as the webapps score one more.&quot;</p>

<section class="comments"><a name="comments"></a>
<div class="article comment">
<div class="comment-author"><h2><a target="_blank" href="http://simon.incutio.com/">Simon Willison</a> commented</h2></div>
<div class="time 2004-06-17T17:17:59 pubdate meta">17 June 2004 at 17:17</div>
<p>Is that a properly indexed full-text search, or just a straight forward grep-style file scan? It doesn't seem very fast on my machine (Tim's looking for sub-second response times I imagine) but then I may not have set it up to index properly.</p>
</div>
<div class="article comment">
<div class="comment-author"><h2><a target="_blank" href="http://dobbse.net/">eric</a> commented</h2></div>
<div class="time 2004-06-17T18:46:55 pubdate meta">17 June 2004 at 18:46</div>
<p>Simon,</p>

<p>I have lost this comment twice today for having to hard restart my laptop.  I think there's a correlation, but let me come to that later.  With the trusty help of emacs this will hopefully be the last time I retype this.</p>

<p>I pinged Tim with an email 'cos I'm about certain he's not subscribed to my blog.  He replied quite quickly with exactly the complaint about indexing.  Having gotten a somewhat obvious reply to a somewhat obvious suggestion I had to check a little further.  Back in the 90's I remember an Apple rep being quite excited about some search technology their engineers had been cooking up.  I think that became Sherlock before it morphed into a copycat of Watson.  Surely Apple wouldn't just loose that full-text search.  Surely, from their usability throne, they would index it.</p>

<p>There's evidence of indexing in the Finder Preferences Advanced pane.  You can Select "Languages for searching file contents" which brings up a dialog window indicating that fewer languages will speed indexing for full-text search.  But I wasn't satisfied with that.</p>

<p>I ran a search in my home directory, chug ... chug ... chug ... chug ... not especially impressive.  But the second search was speedier.  Maybe not as quick as Google -- the metric Tim had mentioned in his email -- but it was satisfying and returned more than Google's standard of the first ten hits.</p>

<p>I conclude that Finder indexes only after the first search which makes for a sour first impression.  I wouldn't have tried a second time if I hadn't just told Tim Bray (of all people) about search (of all things).</p>

<p>Back to today's crashes.  I haven't isolated the cause, but the second crash in particular makes me suspicious.  While I was retyping this comment, I thought I would test the search again just to double-check myself before spouting off publicly.  I was somewhat surprised that the first search was very sluggish.  Maybe I lost the index in the first crash.  I canceled the search but heard the disk drive still ticking away.  'top' revealed a conspicuously named process: "ContentInd".  Activity Monitor confirmed my suspicion -- its full name is ContentIndexer.  This confirms the lazy indexing theory.  But as I switched triumphantly back to Safari the UI froze again.  I'm not quite ready to blame ContentIndexer alone for my freezes today, but I am going to get this comment posted before I test it again. :-)</p>
</div>
<div class="article comment">
<div class="comment-author"><h2><a target="_blank" href="http://dobbse.net/">eric</a> commented</h2></div>
<div class="time 2004-06-17T20:15:19 pubdate meta">17 June 2004 at 20:15</div>
<p>Who knew I was going to be this interested?</p>

<p>The first thing I can say is that ContentIndexing is not solely responsible for my freezes.  With just Finder and Activity Monitor running plus some hidden constellation of background processes I didn't run into any more freezes.  In fact, it seemed sufficiently stable that I even fired up Emacs to continue writing.</p>

<p>This is the first time I've spent much time with Activity Monitor.  It's kinda cool in that mind-numbing-screen-saver kind of way.  In the main window I've displayed the Disk Activity tab.  In the foreground I opened the Info about ContentIndexing and specifically the Open Files tab.  Make a mental note of that.  Pretty handy to see what files are getting tickled by a long running process.  Watching some of the files flash by has been a little surreal.  "I forgot about _that_ thing."  My Downloads folder is full of PDFs that I started but didn't finish reading, or that I wanted to save for later.</p>

<p>Running a few subsequent searches returns mixed results.  Definately below the mark Google sets for search.  That's a long time to spend to discover that OS X's full-text search isn't as cool as I was expecting.  You just can't trust those dusty memories of conversations with Apple reps, I guess.<br />
</p>
</div>
<div class="article comment">
<div class="comment-author"><h2><a href="mailto&#58;dg&#64;NOSPAMuperiscope&#46;com">Dylan Gordon</a> commented</h2></div>
<div class="time 2004-07-07T11:52:28 pubdate meta">07 July 2004 at 11:52</div>
<p>Hi,</p>

<p>Just a note on the crashing; I took my new iBook to Europe with some archives I needed to frequently search. Hard crashes all the time when using the search option in Finder. </p>

<p>So, just backing up the bug report, it's definitely related to searching, but like eric I haven't yet been able to figure out the exact correlation.</p>
</div>
</section>
